---
title: "Deploy Traefik and Configure with Cloudflare"
---

## Introduction
In this guide, we will walk through the steps to deploy <Icon icon="/icons/Traefik Proxy.svg" iconType="solid" />Traefik, a popular open-source reverse proxy and load balancer, and configure it to work with Cloudflare for enhanced security and performance.
## Prerequisites
Before we begin, ensure you have the following prerequisites in place:
- A server or virtual machine with Docker installed.
- A Cloudflare account with a domain configured.
- Basic knowledge of Docker and Traefik.
## Logical Diagram
```plaintext
+-------------------+          +------------------+
|                   |          |                  |
|   Client Browser  +--------->|   Cloudflare     |
|                   |          |                  |
+-------------------+          +--------+---------+
                                        |                     +------------------+
                                        |                     |                  |  
                                        +-------------------->  Traefik Reverse  |      
                                                              |     Proxy        |
                                                              |                  |
                                                              +--------+---------+
                                                                         |
                                                                         |
                                                                +--------v---------+
                                                                |                  |
                                                                |   Backend Apps   |
                                                                |                  |
                                                                +------------------+            
```         
## Step 1: Deploy Traefik with Docker
1. Create a `docker-compose.yml` file to define the Traefik service:
    ```yaml
    services:
    traefik:
    image: traefik:v3.4
    container_name: traefik
    restart: unless-stopped
    security_opt:
        - no-new-privileges:true
    ports:
        - 80:80
        - 443:443
    environment:
        - TZ=Asia/Dhaka
        - CF_API_EMAIL="cloudflare mail ID"
        - CF_DNS_API_TOKEN="genetate it from cloudflare"
    volumes:
        - /var/run/docker.sock:/var/run/docker.sock:ro
        - ./traefik-data/acme.json:/acme.json
        - ./traefik-data/traefik.yml:/etc/traefik/traefik.yml
    networks:
        - web
    labels:
        - "traefik.enable=true"
        # Dashboard
        - "traefik.http.routers.dashboard.rule=Host(`traefik.your-domain.com`)"
        - "traefik.http.routers.dashboard.service=api@internal"
        - "traefik.http.routers.dashboard.tls=true"
        - "traefik.http.routers.dashboard.tls.certresolver=cloudflare"
        - "traefik.http.routers.dashboard.entrypoints=websecure"
        - "traefik.http.routers.dashboard.middlewares=dashboard-auth"
        - "traefik.http.middlewares.dashboard-auth.basicauth.users=admin:$$2y$$XXXXXXXXXXXXXXX"

    networks:
    web:
    external: true
    ```
2. Create the necessary directories and files and change the directory permission for Traefik configuration:
   ```bash
    mkdir -p traefik-data
    touch traefik-data/acme.json
    chmod 600 traefik-data/acme.json
   ```
3. Create the `traefik.yml` configuration file inside the `traefik-data` directory:
   ```yaml
   api:
    dashboard: true
    insecure: false

    entryPoints:
    web:
        address: :80
        http:
        redirections:
            entryPoint:
            to: websecure
            scheme: https
    websecure:
        address: :443

    providers:
    docker:
        exposedByDefault: false
        network: web

    certificatesResolvers:
    cloudflare:
        acme:
        email: your email address
        storage: /acme.json
        dnsChallenge:
            provider: cloudflare
            resolvers:
            - "1.1.1.1:53"
            - "8.8.8.8:53"
    log:
    level: error

    ``` 
4. Start the Traefik container using Docker Compose:
   ```bash
   docker-compose up -d
   ```
## Step 2: Configure Cloudflare DNS 
1. Log in to your Cloudflare account and navigate to the DNS settings for your domain.
2. Add a CNAME record for your Traefik dashboard:
   - Type: CNAME
   - Name: traefik  
    - Target: your-server-ip-or-domain
    - TTL: Auto
3. Ensure that the proxy status is enabled (orange cloud icon) for the CNAME record.
## Step 3: Access the Traefik Dashboard
1. Open your web browser and navigate to `https://traefik.your-domain.com`.
2. You should see the Traefik dashboard login prompt. Enter the username and password you configured in the `docker-compose.yml` file.
3. Once logged in, you can monitor and manage your Traefik instance.
## Conclusion
You have successfully deployed Traefik and configured it to work with Cloudflare. You can now take advantage of Traefik's powerful features along with Cloudflare's security and performance enhancements for your
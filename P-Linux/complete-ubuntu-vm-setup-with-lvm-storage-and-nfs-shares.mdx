---
title: "Complete Ubuntu VM Setup with LVM Storage and NFS Shares"
icon: "/icons/ubuntu.svg"
description: "A comprehensive guide to setting up an Ubuntu virtual machine with LVM storage and NFS shares."
tags: ["Ubuntu", "LVM", "NFS", "Virtual Machine", "Storage"]   
keywords: ["Ubuntu", "LVM", "NFS", "Virtual Machine", "Storage", "Setup Guide"]
---
## Introduction
Setting up an Ubuntu virtual machine (VM) with Logical Volume Management (LVM) storage and  Network File System (NFS) shares can enhance your system's flexibility and scalability. This guide provides a step-by-step approach to configuring an Ubuntu VM with LVM for efficient storage management and NFS for sharing files across the network.  
<Info>
## Prerequisites
Before you begin, ensure you have the following prerequisites: 
- An preferred virtualization platform (e.g., VirtualBox, VMware, KVM).
- An Ubuntu ISO image for installation.
- Basic knowledge of Linux command line and system administration.
</Info>
## Step 1: Installing Ubuntu VM
1. Create a new virtual machine in your chosen virtualization platform.
2. Allocate sufficient resources (CPU, RAM, Disk Space) based on your requirements.
3. Mount the Ubuntu ISO image and start the VM.
4. Follow the on-screen instructions to install Ubuntu, ensuring you set up a user account and password.
5. In the installation process keep the unallocated or free space as it is.
6. Complete the installation and reboot the VM.
## Step 2: Enable remote root access:
1. Open a terminal in your Ubuntu VM.
2. Use below command to set root password
```bash
sudo passwd root
```
3. Command to enable remote root login
```bash
sudo sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config
sudo systemctl restart sshd
```
## Step 3: Install root CA certificates in the trust store
1. Copy the root CA certificate file (e.g., `my-ca.crt`) to the `/usr/local/share/ca-certificates/` directory.
```bash
sudo cp my-ca.crt /usr/local/share/ca-certificates/
```
2. Update the CA certificates:
```bash 
sudo update-ca-certificates
```
## Step 4: Setting Up LVM Storage
1. Show the availabls space using below command
```bash
vgs
```
you will see the free space in the VG like below:
```plaintext
   VG        #PV #LV #SN Attr   VSize    VFree
  ubuntu-vg   1   1   0 wz--n- <498.00g <398.00g
```
2. to see the absolute free space use below command
```bash
pvs 
```
you will see the free space in the PV like below:
```plaintext
  PV         VG        Fmt  Attr PSize    PFree
  /dev/sda3  ubuntu-vg lvm2 a--  <498.00g <398.00g
```
